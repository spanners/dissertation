(function(){var userAccountTab=document.getElementById("userAcctTab_MainMenu");var userAccountTab2=document.getElementById("userAcctTab_MainMenu2");var resourceTab=document.getElementById("resourceTab_MainMenu");var surveysTab=document.getElementById("surveysTab_MainMenu");var tourTab=document.getElementById("tourTab_MainMenu");var onId=null;function clickMenu(el){var _onId=onId;if(_onId){closeMenu(_onId);if(_onId!=el.id){openMenu(el)}}else{openMenu(el)}}function openMenu(el){SM.DOM.addClass(el,"open");onId=el.id}function closeMenu(id){if(id==onId){try{SM.DOM.removeClass(document.getElementById(id),"open")}catch(err){}onId=null}}function setupMenu(tab,menuid){SM.Event.add(tab,"click",function(e){clickMenu(document.getElementById(menuid));e.stopPropagation();e.preventDefault()})}setupMenu(userAccountTab,"dd-my-account");setupMenu(userAccountTab2,"dd-my-account");setupMenu(resourceTab,"dd-use-cases");setupMenu(surveysTab,"dd-online-surveys");SM.Event.add(document.body,"click",function(){closeMenu("dd-use-cases");closeMenu("dd-online-surveys");closeMenu("dd-my-account")})})();if(SM&&SM.Session){var init=function(Y){var sessionCommonChecker={CHECK_MARGIN:5*1e3,isActivityUpdateEnabled:true,start:function(){SM.Session.updateActivity();SM.Session.reset()},reset:function(){this.openReminder(false);this.intervalID=this.resetTimer(this.intervalID,SM.Session.remainingTime(),function(){SM.Session.checkActivity()});this.reminderIntervalID=this.resetTimer(this.reminderIntervalID,SM.Session.reminderRemainingTime(),function(){SM.Session.checkReminder()})},resetTimer:function(intervalID,remainingTime,timeoutActivity){if(intervalID){clearTimeout(intervalID)}var timeout=remainingTime-this.CHECK_MARGIN+500;var tid=setTimeout(timeoutActivity,timeout);return tid},checkActivity:function(){if(SM.Session.remainingTime()<=this.CHECK_MARGIN){this.logout()}else{this.extend()}},checkReminder:function(){if(SM.Session.reminderRemainingTime()<SM.Session.reminderLeadTime()){this.openReminder(true)}},logout:function(){window.location.href="/user/sign-out/?timeout=true"},updateActivity:function(){if(SM.Session.isActivityUpdateEnabled)SM.Session.lastActivityTime=SM.Session.now()},now:function(){return(new Date).getTime()},reminderLeadTime:function(){if(SM.Session.TIMEOUT_INTERVAL<10*60*1e3){return 60*1e3}else{return 5*60*1e3}},remainingTime:function(){var idleTime=this.now()-this.lastActivityTime;var remainingTime=SM.Session.TIMEOUT_INTERVAL-idleTime;return remainingTime},reminderRemainingTime:function(){return this.remainingTime()-this.reminderLeadTime()},reminderCloseHandler:function(){SM.Session.openReminder(false);SM.Session.isActivityUpdateEnabled=true;SM.Session.updateActivity()}};var sessionJQueryChecker={extend:function(){$.ajax({url:"/user/session/",dataType:"json",complete:function(request,textStatus){if(textStatus==="success"){SM.Session.reset()}else{SM.Session.logout()}}})},bindActivity:function(){$(document).bind("keydown",this.updateActivity).bind("mousedown",this.updateActivity)},openReminder:function(open){var reminder=$(".hipaa-session-warning-view");var current=reminder.hasClass("open");if(open!==current){if(open){$("<div/>").addClass("hipaa-session-warning-overlay dialog-overlay dialog-overlay-modal open").insertBefore(reminder);SM.Session.isActivityUpdateEnabled=false;reminder.removeClass("close").addClass("open");reminder.find(".dialog-close-btn").one("mousedown",SM.Session.reminderCloseHandler)}else{$(".hipaa-session-warning-overlay").remove();reminder.removeClass("open").addClass("close")}}else{}}};var sessionYuiChecker={extend:function(){Y.io("/user/session/",{on:{complete:function(transaction,response){var success=false;if(response.status===200){var data;try{data=Y.JSON.parse(r.responseText);success=true}catch(e){}}if(success){SM.Session.reset()}else{SM.Session.logout()}}}})},bindActivity:function(){Y.on(["keydown","mousedown"],this.updateActivity)},openReminder:function(open){var reminder=Y.all(".hipaa-session-warning-view");var current=reminder.hasClass("open");if(open!==current){if(open){var modalOverlay=Y.Node.create('<div class="hipaa-session-warning-overlay dialog-overlay dialog-overlay-modal open" />');reminder.insert(modalOverlay,"before");SM.Session.isActivityUpdateEnabled=false;reminder.removeClass("close").addClass("open");reminder.item(0).one(".dialog-close-btn").on("mousedown",SM.Session.reminderCloseHandler)}else{Y.all(".hipaa-session-warning-overlay").remove();reminder.removeClass("open").addClass("close")}}else{}}};if(window.top===window.self){if(window.jQuery){$.extend(SM.Session,sessionCommonChecker,sessionJQueryChecker)}else if(YUI){SM.Session=Y.merge(SM.Session,sessionCommonChecker,sessionYuiChecker);SM.Session.Y=Y}SM.Session.start()}else{SM.Session=window.top.SM.Session}if(SM.Session){SM.Session.bindActivity()}};if(window.jQuery){$(init())}else if(YUI){YUI().use("*",init)}}